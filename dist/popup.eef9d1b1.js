(()=>{"use strict";var e,s={826:(e,s,a)=>{var t=a(540),c=a(338),i=a(962),n=a(848);const r=({tabs:e,onHibernate:s,onRestore:a,onSwitch:t})=>{const c=e=>{if(!e)return"Never";const s=Date.now()-e;return s<6e4?"Just now":s<36e5?`${Math.floor(s/6e4)}m ago`:s<864e5?`${Math.floor(s/36e5)}h ago`:`${Math.floor(s/864e5)}d ago`},r=e=>{try{return new URL(e).hostname}catch{return e}};return 0===e.length?(0,n.jsxs)("div",{className:"empty-state",children:[(0,n.jsx)("div",{className:"empty-icon",children:(0,n.jsx)(i.KqI,{size:48})}),(0,n.jsx)("h3",{children:"No tabs found"}),(0,n.jsx)("p",{children:"Try adjusting your search or open some tabs to get started."})]}):(0,n.jsx)("div",{className:"tab-list",children:e.map(e=>(0,n.jsxs)("div",{className:`tab-item ${e.hibernated?"hibernated":""} ${e.active?"active":""}`,children:[(0,n.jsx)("div",{className:"tab-favicon",children:e.favIconUrl?(0,n.jsx)("img",{src:e.favIconUrl,alt:"",width:16,height:16}):(0,n.jsx)("div",{className:"favicon-placeholder",children:"ðŸ“„"})}),(0,n.jsxs)("div",{className:"tab-content",onClick:()=>t(e.id),children:[(0,n.jsxs)("div",{className:"tab-title",children:[e.title||r(e.url),(0,n.jsxs)("div",{className:"tab-indicators",children:[e.pinned&&(0,n.jsx)(i.yUp,{size:12,className:"indicator pinned"}),e.audible&&(0,n.jsx)(i.jIq,{size:12,className:"indicator audible"}),e.hasUnsavedData&&(0,n.jsx)("span",{className:"indicator unsaved",title:"Unsaved changes",children:"â—"})]})]}),(0,n.jsx)("div",{className:"tab-url",children:r(e.url)}),(0,n.jsxs)("div",{className:"tab-stats",children:[(0,n.jsxs)("span",{className:"stat",children:["Last active: ",c(e.timeLastActive)]}),e.hibernationCount>0&&(0,n.jsxs)("span",{className:"stat",children:["Hibernated: ",e.hibernationCount,"x"]})]})]}),(0,n.jsx)("div",{className:"tab-actions",children:e.hibernated?(0,n.jsx)("button",{className:"action-button restore",onClick:()=>a(e.id),title:"Restore tab",children:(0,n.jsx)(i.jGG,{size:14})}):(0,n.jsx)("button",{className:"action-button hibernate",onClick:()=>s(e.id),title:"Hibernate tab",disabled:e.active||e.pinned,children:(0,n.jsx)(i.vRz,{size:14})})})]},e.id))})},o=({workspaces:e,onWorkspaceChange:s})=>(0,n.jsxs)("div",{className:"workspace-manager",children:[(0,n.jsxs)("div",{className:"workspace-header",children:[(0,n.jsx)("h2",{children:"Workspaces"}),(0,n.jsx)("button",{className:"add-workspace-btn",onClick:()=>{const e={id:`workspace-${Date.now()}`,name:"New Workspace",description:"A new workspace for organizing tabs",icon:"ðŸ“",collections:[]};console.log("Creating new workspace:",e),s()},children:"+ New Workspace"})]}),(0,n.jsx)("div",{className:"workspace-list",children:e.map(e=>(0,n.jsx)("div",{className:"workspace-item",children:(0,n.jsxs)("div",{className:"workspace-header",children:[(0,n.jsx)("span",{className:"workspace-icon",children:e.icon}),(0,n.jsxs)("div",{className:"workspace-info",children:[(0,n.jsx)("div",{className:"workspace-name",children:e.name}),(0,n.jsx)("div",{className:"workspace-description",children:e.description})]}),(0,n.jsxs)("div",{className:"workspace-stats",children:[e.collections?e.collections.length:0," collections"]})]})},e.id))})]}),l=({metrics:e})=>(0,n.jsxs)("div",{className:"performance-dashboard",children:[(0,n.jsxs)("div",{className:"performance-header",children:[(0,n.jsx)("h2",{children:"Performance Metrics"}),(0,n.jsx)("p",{children:"Real-time system optimization statistics"})]}),(0,n.jsxs)("div",{className:"performance-metrics",children:[(0,n.jsxs)("div",{className:"metric-card",children:[(0,n.jsx)("div",{className:"metric-value",children:e.totalTabsManaged}),(0,n.jsx)("div",{className:"metric-label",children:"Total Tabs"})]}),(0,n.jsxs)("div",{className:"metric-card",children:[(0,n.jsx)("div",{className:"metric-value",children:e.hibernatedTabs}),(0,n.jsx)("div",{className:"metric-label",children:"Hibernated"})]}),(0,n.jsxs)("div",{className:"metric-card",children:[(0,n.jsxs)("div",{className:"metric-value",children:[e.memorySavedMB,"MB"]}),(0,n.jsx)("div",{className:"metric-label",children:"Memory Saved"})]}),(0,n.jsxs)("div",{className:"metric-card",children:[(0,n.jsxs)("div",{className:"metric-value",children:[Math.round(e.cpuSavedPercent),"%"]}),(0,n.jsx)("div",{className:"metric-label",children:"CPU Saved"})]})]})]}),d=({tabs:e,workspaces:s,onClose:a,onAction:t})=>(0,n.jsx)("div",{className:"command-palette-overlay",onClick:a,children:(0,n.jsxs)("div",{className:"command-palette",onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("div",{className:"command-search",children:(0,n.jsx)("input",{type:"text",placeholder:"Search tabs, workspaces, and actions..."})}),(0,n.jsxs)("div",{className:"command-results",children:[(0,n.jsx)("div",{className:"command-item",children:(0,n.jsxs)("div",{className:"command-content",children:[(0,n.jsx)("div",{className:"command-title",children:"Switch to Tab"}),(0,n.jsx)("div",{className:"command-description",children:"Quickly switch to any open tab"})]})}),(0,n.jsx)("div",{className:"command-item",children:(0,n.jsxs)("div",{className:"command-content",children:[(0,n.jsx)("div",{className:"command-title",children:"Hibernate All Inactive"}),(0,n.jsx)("div",{className:"command-description",children:"Hibernate all tabs except active ones"})]})})]})]})}),m=()=>{const[e,s]=(0,t.useState)("tabs"),[a,c]=(0,t.useState)(""),[m,h]=(0,t.useState)({}),[p,v]=(0,t.useState)([]),[j,x]=(0,t.useState)(null),[u,b]=(0,t.useState)(!0),[N,w]=(0,t.useState)(!1);(0,t.useEffect)(()=>{k();const e=e=>{(e.ctrlKey||e.metaKey)&&e.shiftKey&&"Space"===e.code&&(e.preventDefault(),w(!0)),"Escape"===e.key&&w(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]);const f=async(e,s=3)=>{for(let a=0;a<s;a++)try{return await chrome.runtime.sendMessage(e)}catch(e){if(a===s-1)return console.error("Failed to send message after retries:",e),null;await new Promise(e=>setTimeout(e,100*(a+1)))}},k=async()=>{try{b(!0);const e=await f({type:"GET_TAB_DATA"});if(e&&!e.error)h(e);else{const e=await chrome.tabs.query({}),s={};e.forEach(e=>{s[e.id]={id:e.id,url:e.url||"",title:e.title||"New Tab",favIconUrl:e.favIconUrl,windowId:e.windowId,index:e.index,active:e.active,pinned:e.pinned,audible:e.audible||!1,timeOpened:Date.now(),timeLastActive:e.active?Date.now():Date.now()-6e4,hibernated:!1,hibernationCount:0,hasUnsavedData:!1}}),h(s)}v([{id:"default",name:"Default Workspace",description:"Your main workspace",icon:"ðŸ ",collections:[]}]);const s=await f({type:"GET_PERFORMANCE_METRICS"});s&&!s.error?x(s):setTimeout(()=>{x({totalTabsManaged:Object.keys(m).length,hibernatedTabs:0,memorySavedMB:0,cpuSavedPercent:0,lastCalculated:Date.now()})},100)}catch(e){console.error("Error loading popup data:",e)}finally{b(!1)}},g=Object.values(m).filter(e=>{if(!a)return!0;const s=a.toLowerCase();return e.title.toLowerCase().includes(s)||e.url.toLowerCase().includes(s)});return u?(0,n.jsx)("div",{className:"popup-container loading",children:(0,n.jsxs)("div",{className:"loading-spinner",children:[(0,n.jsx)(i.KqI,{className:"animate-spin",size:24}),(0,n.jsx)("span",{children:"Loading Tab Weaver..."})]})}):(0,n.jsxs)("div",{className:"popup-container",children:[N&&(0,n.jsx)(d,{tabs:m,workspaces:p,onClose:()=>w(!1),onAction:e=>{e(),w(!1)}}),(0,n.jsxs)("header",{className:"popup-header",children:[(0,n.jsxs)("div",{className:"header-title",children:[(0,n.jsx)(i.zgK,{size:20}),(0,n.jsx)("h1",{children:"Tab Weaver"})]}),(0,n.jsxs)("div",{className:"header-actions",children:[(0,n.jsx)("button",{className:"icon-button",onClick:()=>w(!0),title:"Command Palette (Ctrl+Shift+Space)",children:(0,n.jsx)(i.vji,{size:16})}),(0,n.jsx)("button",{className:"icon-button",onClick:()=>{chrome.tabs.create({url:chrome.runtime.getURL("dist/options.html")}),window.close()},title:"Settings",children:(0,n.jsx)(i.wB_,{size:16})})]})]}),(0,n.jsxs)("nav",{className:"popup-nav",children:[(0,n.jsxs)("button",{className:"nav-button "+("tabs"===e?"active":""),onClick:()=>s("tabs"),children:[(0,n.jsx)(i.Tde,{size:16}),"Tabs (",Object.keys(m).length,")"]}),(0,n.jsxs)("button",{className:"nav-button "+("workspaces"===e?"active":""),onClick:()=>s("workspaces"),children:[(0,n.jsx)(i.zgK,{size:16}),"Workspaces (",p.length,")"]}),(0,n.jsxs)("button",{className:"nav-button "+("performance"===e?"active":""),onClick:()=>s("performance"),children:[(0,n.jsx)(i.VH9,{size:16}),"Performance"]})]}),"tabs"===e&&(0,n.jsxs)("div",{className:"popup-content",children:[(0,n.jsxs)("div",{className:"search-container",children:[(0,n.jsx)(i.vji,{size:16,className:"search-icon"}),(0,n.jsx)("input",{type:"text",placeholder:"Search tabs...",value:a,onChange:e=>c(e.target.value),className:"search-input"})]}),(0,n.jsx)(r,{tabs:g,onHibernate:async e=>{try{const s=await f({type:"HIBERNATE_TAB",tabId:e});s&&s.success?await k():console.warn("Failed to hibernate tab via background script")}catch(e){console.error("Error hibernating tab:",e)}},onRestore:async e=>{try{const s=await f({type:"RESTORE_TAB",tabId:e});s&&s.success?await k():console.warn("Failed to restore tab via background script")}catch(e){console.error("Error restoring tab:",e)}},onSwitch:async e=>{try{await chrome.tabs.update(e,{active:!0});const s=await chrome.tabs.get(e);await chrome.windows.update(s.windowId,{focused:!0}),window.close()}catch(e){console.error("Error switching to tab:",e)}}})]}),"workspaces"===e&&(0,n.jsx)("div",{className:"popup-content",children:(0,n.jsx)(o,{workspaces:p,onWorkspaceChange:k})}),"performance"===e&&j&&(0,n.jsx)("div",{className:"popup-content",children:(0,n.jsx)(l,{metrics:j})}),(0,n.jsxs)("footer",{className:"popup-footer",children:[(0,n.jsxs)("div",{className:"footer-stats",children:[(0,n.jsxs)("span",{className:"stat",children:[(0,n.jsx)(i.zD7,{size:12}),j?.hibernatedTabs||0," hibernated"]}),(0,n.jsxs)("span",{className:"stat",children:[(0,n.jsx)(i.KqI,{size:12}),j?.memorySavedMB||0,"MB saved"]})]}),(0,n.jsx)("div",{className:"welcome-message",children:"Welcome to Tab Weaver! ðŸ•¸ï¸ Click ? for help"})]})]})};c.createRoot(document.getElementById("popup-root")).render((0,n.jsx)(m,{}))}},a={};function t(e){var c=a[e];if(void 0!==c)return c.exports;var i=a[e]={exports:{}};return s[e](i,i.exports,t),i.exports}t.m=s,e=[],t.O=(s,a,c,i)=>{if(!a){var n=1/0;for(d=0;d<e.length;d++){for(var[a,c,i]=e[d],r=!0,o=0;o<a.length;o++)(!1&i||n>=i)&&Object.keys(t.O).every(e=>t.O[e](a[o]))?a.splice(o--,1):(r=!1,i<n&&(n=i));if(r){e.splice(d--,1);var l=c();void 0!==l&&(s=l)}}return s}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[a,c,i]},t.d=(e,s)=>{for(var a in s)t.o(s,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:s[a]})},t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e={800:0};t.O.j=s=>0===e[s];var s=(s,a)=>{var c,i,[n,r,o]=a,l=0;if(n.some(s=>0!==e[s])){for(c in r)t.o(r,c)&&(t.m[c]=r[c]);if(o)var d=o(t)}for(s&&s(a);l<n.length;l++)i=n[l],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(d)},a=self.webpackChunkthe_tab_weaver=self.webpackChunkthe_tab_weaver||[];a.forEach(s.bind(null,0)),a.push=s.bind(null,a.push.bind(a))})();var c=t.O(void 0,[699,183],()=>t(826));c=t.O(c)})();